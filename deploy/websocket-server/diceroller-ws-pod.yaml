apiVersion: v1
kind: Pod
metadata:
  name: diceroller-websocket
  labels:
    app: diceroller
    rel: stable
spec:
  containers:
  - name: diceroller-websocket
    image: localhost:5000/diceroller
    imagePullPolicy: IfNotPresent
    livenessProbe:
      httpGet:
        path: /api/status
        port: 80
      initialDelaySeconds: 2 
      timeoutSeconds: 2     
      periodSeconds: 5
      failureThreshold: 1
    readinessProbe:
      httpGet:
        path: /api/status
        port: 80
      initialDelaySeconds: 3
      periodSeconds: 5
      failureThreshold: 1
    resources:
      limits:
        memory: 512Mi
        cpu: "1"
      requests:
        memory: 256Mi
        cpu: "0.2"
    ports:
    - containerPort: 80